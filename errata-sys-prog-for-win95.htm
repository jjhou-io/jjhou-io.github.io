<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=big5">
<meta name="GENERATOR" content="Microsoft FrontPage 3.0">
<title>勘誤：Windows 95 系統程式設計 - VMs 與 VxDs</title>
<meta name="Microsoft Theme" content="construc 111, default">
<meta name="Microsoft Border" content="tl, default">
</head>

<body background="urbtextb.gif" tppabs="http://jjhou.boolan.com/urbtextb.gif" bgcolor="#FF9900" text="#330033" link="#009900"
vlink="#996600" alink="#FF0066">
<!--mstheme--></font><div align="center"><center>

<table border="0" cellpadding="0" cellspacing="8" width="920">
  <tr>
    <td align="right" valign="top" width="26">&nbsp; <!--mstheme--></font></td>
    <td width="29"><!--mstheme--></font></td>
    <td valign="bottom" width="877"><big><big><font face="Arial Black">Windows 95</font><font
    face="華康粗黑體"> 系統程式設計 </font></big></big><font face="華康中黑體">-
    虛擬機器與 VxD 程式設計</font><!--mstheme--></font></td>
  </tr>
  <tr>
    <td valign="top" width="26"><font size="3"><br>
    <br>
    </font><!--mstheme--></font></td>
    <td width="29"><!--mstheme--></font></td>
    <td valign="top" width="877"><font size="3"><a href="jjtbooks-sys-prog-for-win95.htm" tppabs="http://jjhou.boolan.com/jjtbooks-sys-prog-for-win95.htm"><img
    src="oney.jpg" tppabs="http://jjhou.boolan.com/oney.jpg" width="161" height="193" alt="oney.jpg (16686 bytes)"></a></font><p>原著：<font
    color="#0000FF">Systems Programming for Windows 95</font>, by Walter Oney, Microsoft
    Press/1996</p>
    <p><font color="#000000">注意，本書</font><font color="#0000FF">英文版之勘誤（errata）</font><font
    color="#000000">並未修正於中文版內。我原打算將英文版 errata <br>
    譯為中文，載於此處。但恐英文版 errata
    時有修正新增，造成此處中譯資料無法與之<br>
    隨時同步更新，反增讀者困擾。因此請讀者 hyperlink 至英文版 errata<br>
    （</font><a href="javascript:if(confirm(%27http://www.oneysoft.com/errata.htm  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.oneysoft.com/errata.htm%27" tppabs="http://www.oneysoft.com/errata.htm" target="_blank">http://www.oneysoft.com/errata.htm</a><font
    color="#000000"> ）自行閱讀。<br>
    <br>
    以下列出 1999.04.22 之英文版 errata 大綱，以及對應之中譯本頁次。</font></p>
<!--mstheme-->    </font><div align="left"><table border="1" width="523" bordercolorlight="#CC3300"
    bordercolordark="#000000">
      <tr>
        <td bgcolor="#000080" width="394"><font color="#FFFFFF">Errata and Updates for Systems
        Programming for Windows 95 <br>
        (Microsoft Press 1996) <br>
        Page references are to the English edition. </font><!--mstheme--></font></td>
        <td bgcolor="#000080" width="117"><font color="#FFFFFF"><br>
        <br>
        中譯本頁次</font><!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Crashes in sample programs<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">System Control Messages and the Critical Section (p. 231)<!--mstheme--></font></td>
        <td width="117">p273~p274<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">How to do an interlocked add (p. 233)<!--mstheme--></font></td>
        <td width="117">p278<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Where to find DEVIDS.TXT<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Bugs in SERIAL sample<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Error in _PageReserve Example (p. 349)<!--mstheme--></font></td>
        <td width="117">p413<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Erroneous reference to 2F/1601 (p. 231)<!--mstheme--></font></td>
        <td width="117">p274<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Building VxDs with Microsoft Visual C++ Version 4.2<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Missing VXD_IO Macros (p. 404)<!--mstheme--></font></td>
        <td width="117">p477<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Problems with vdmad.h Header<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Missing statement in dynamic unload example (p. 178)<!--mstheme--></font></td>
        <td width="117">p212<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Missing WINAPI in OpenVxDHandle example (p. 239)<!--mstheme--></font></td>
        <td width="117">p284<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">PM and V86 API arguments reversed (p. 273)<!--mstheme--></font></td>
        <td width="117">p324<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Incorrect Control_Dispatch Arguments (p. 171)<!--mstheme--></font></td>
        <td width="117">p204<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">How Big is that RAM Disk? (p. 563)<!--mstheme--></font></td>
        <td width="117">p660<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">How an FSD pends a request<!--mstheme--></font></td>
        <td width="117">p743<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Signal_Semaphore[_No_Switch] (p. 236)<!--mstheme--></font></td>
        <td width="117">p280<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">R0_FindFirstFile error<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Problems with iosdcls.h Header<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">What error to return from failed mount request<!--mstheme--></font></td>
        <td width="117">p710<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Those pesky linker warnings<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Error in APC example (p. 286)<!--mstheme--></font></td>
        <td width="117">p338<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Error in initialization sequence (p. 141)<!--mstheme--></font></td>
        <td width="117">p168~p169<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">More about Big Real Mode<!--mstheme--></font></td>
        <td width="117">p92<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Using Microsoft Visual C++ Version 5<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Problems with CHAP15 samples<!--mstheme--></font></td>
        <td width="117">　<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">Using VXDINLINE Service Wrappers<!--mstheme--></font></td>
        <td width="117">p222~p223<!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="394">DeviceIoControl parameter usage<!--mstheme--></font></td>
        <td width="117">p320~p321<!--mstheme--></font></td>
      </tr>
    </table>
    </div><p><br>
    <br>
    <font color="#FF0000"><strong>以下是第二刷完成的錯誤修正：</strong></font><br>
    <br>
    <br>
    頁碼：3（譯序第一頁），L1 </p>
<!--mstheme-->    </font><div align="left"><table border="0" width="698">
      <tr>
        <td width="114"><small>原文：</small><!--mstheme--></font></td>
        <td width="103"><!--mstheme--></font></td>
        <td width="80"><small>1997 </small><!--mstheme--></font></td>
        <td width="236"><!--mstheme--></font></td>
        <td width="196"><small>Matt Pietrek</small><!--mstheme--></font></td>
        <td width="70"><!--mstheme--></font></td>
        <td width="820"><small>Windows 95 System Programming Secrets</small><!--mstheme--></font></td>
        <td width="806"><!--mstheme--></font></td>
      </tr>
      <tr>
        <td width="114"><small>更正：</small><!--mstheme--></font></td>
        <td width="103"><small><font color="#0000FF">我於</font></small><!--mstheme--></font></td>
        <td width="80"><small>1997</small><!--mstheme--></font></td>
        <td width="236"><small><font color="#0000FF">年初譯完</font></small><!--mstheme--></font></td>
        <td width="196"><small>Matt Pietrek</small><!--mstheme--></font></td>
        <td width="70"><small><font color="#0000FF">的</font></small><!--mstheme--></font></td>
        <td width="820"><small>Windows 95 System Programming Secrets</small><!--mstheme--></font></td>
        <td width="806"><small><font color="#0000FF">（中譯為</font></small><!--mstheme--></font></td>
      </tr>
    </table>
    </div><p>侯註：列印當時記憶體不足，以致此行之中文沒有印出，又粗心未檢查到，所以
    :(<br>
    <br>
    <br>
    頁碼：17（前言第一頁），L-3<br>
    原文：供應消費性電子產品的驅動程式，使它們能夠連接 USB（譯註）和
    1934 buses。<br>
    更正：供應消費性電子產品的驅動程式，使它們能夠連接 USB（譯註）和
    <font color="#0000FF">1394</font> buses。<br>
    感謝：Benshark<br>
    <br>
    <br>
    頁碼：p75，圖5-3<br>
    原文：圖5-3最上中央一欄（目前空白）<br>
    更正：加入 &quot;<font color="#0000FF">Segment limit, bits 19~16</font>&quot;
    字樣。<br>
    感謝：Imanaka, jyhuang<br>
    <br>
    <br>
    頁碼：p99，第二小標第二行<br>
    原文：硬體中斷、硬體中斷、以及處理器異常（processor execption）<br>
    更正：硬體中斷、<font color="#0000FF">軟體</font>中斷、以及處理器異常（processor
    execption）<br>
    感謝：Li.T.H, jyhuang<br>
    </p>
    <p><br>
    <strong><font color="#FF0000">以下是第三刷完成的錯誤修正：<br>
    </font></strong><br>
    <br>
    頁碼：p449，L-9，張訓賓註<br>
    原文：新的 DND 規格要求...<br>
    更正：新的 <font color="#0000FF">PnP </font>規格要求...<br>
    侯註：這個錯誤與檢閱者張訓賓先生無關，是我筆誤 :(</p>
    <p>　</p>
    <p><strong><font color="#FF0000">第四刷完全相同於第三刷</font></strong></p>
    <p><strong><font color="#FF0000">第五刷完成的錯誤修正：</font></strong></p>
    <p>頁碼：p55，L3~4<br>
    原文：VMM 然後就呼叫該 service 函式，並重新安排 service ID
    之後的程式碼，<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    將控制權交還給呼叫端（也是個 VxD）。<br>
    更正：VMM 然後就呼叫該 service 函式，<font color="#0000FF">並安排讓控制權回到呼叫端（calling
    VxD）<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    的呼叫動作的下一行。</font><br>
    <br>
    頁碼：p57，L-5<br>
    原文：當然為了「在 Windows NT 跑 32 位元程式」而設計...<br>
    更正：當<font color="#0000FF">初</font>為了「在 Windows NT 跑 32
    位元程式」而設計...</p>
    <p>頁碼：p82，L-4<br>
    原文：（一個 ring0 GDT selector）和 data selector（也是一個 ring0 GDT
    selector）<br>
    更正：（一個 ring0 GDT selector）和 data selector <font color="#0000FF">30h</font>（也是一個
    ring0 GDT selector）</p>
    <p>頁碼：p134，表7-1，last raw, first column<br>
    原文：MOCDE<br>
    更正：M<font color="#0000FF">CO</font>DE</p>
    <p>頁碼：p149，第二段文字最後一行<br>
    原文：in-then-else<br>
    更正：<font color="#0000FF">if</font>-then-else<br>
    <br>
    頁碼：p152，第一個小標點第一行最後<br>
    原文：並參與任何一個 &quot;layered device architectures&quot;<br>
    更正：並<font color="#0000FF">加入</font>任何<font color="#0000FF">適當的</font>
    &quot;layered device architectures&quot;<br>
    <br>
    頁碼：p211，L-2<br>
    原文：你就可以設定 AX 暫存器為函式碼位址，然後<br>
    更正：你就可以將 AX 暫存器設定為<font color="#0000FF"> VXDLDR 的一個
    service 代碼</font>，然後</p>
    <p>　</p>
    <p><strong><font color="#FF0000">請自行做以下修潤：</font></strong><br>
    <br>
    頁碼：p75，圖5-4 （原書<font color="#000000">容易引起誤會</font>）<br>
    說明：<font color="#0000FF">圖中的 page directory
    看起來好像有許多塊，容易引起誤會。<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其實系統中的 page
    directory 只有4096 bytes，內含 1024 個 entries。</font><br>
    <br>
    頁碼：p90，標題下第二行<br>
    原文：從現行的 code segment 所對應的 descriptor 中的位元數，可以得知...<br>
    更正：從現行的 code segment 所對應的 descriptor 中的 <font color="#0000FF">bitness（16
    位元或 32 位元）</font>，<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以得知...<br>
    <br>
    頁碼：p92，L-4 ~ L-3<br>
    原文：根據你所指定的 .286 或 .386 directive 來指定預設的位元數。<br>
    更正：根據你所指定的 .286 或 .386 directive 來指定預設的 <font
    color="#0000FF">bitness<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; （16 位元或 32 位元）</font>。<br>
    <br>
    頁碼：p142，L4<br>
    討論：書上說 DDB 是以 <font color="#0000FF">big-endian</font> 來儲存 MajorVer
    和 MinorVer 兩個 bytes，<br>
    但又說若以一個 word 來處理它們，必須先顛倒 low byte 和 high byte
    的位置。<br>
    兩種說法矛盾。下方註解則說 Intel processor 是以 littel-endian
    方式來存放資料<br>
    （這是正確的說法）。綜觀之，DDB 應是以 <font color="#0000FF">little-endian</font>
    來儲存 MajorVer 和 <br>
    MinorVer 這兩個 bytes。<br>
    <br>
    頁碼：p190，L6<br>
    原文：DDB (Device Control Block)<br>
    更正：DDB (Device <font color="#0000FF">Description</font> Block)<br>
    感謝：Jessy Hou<br>
    <br>
    頁碼：p620，L9（中譯本筆誤）<br>
    原文：} DCB, *PDB;<br>
    更正：} DCB, *<font color="#0000FF">PDCB</font>;<br>
    感謝：Marcel<!--mstheme--></font></td>
  </tr>
</table>
</center></div>

<p>　 </p>
<!--mstheme--></font>
</body>
</html>
